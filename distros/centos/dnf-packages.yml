- name: Import Microsoft GPG key
  rpm_key:
      state: present
      key: https://packages.microsoft.com/keys/microsoft.asc

- name: Add Visual Studio Code repository
  yum_repository:
      name: vscode
      description: Visual Studio Code
      baseurl: https://packages.microsoft.com/yumrepos/vscode
      enabled: yes
      gpgcheck: yes
      gpgkey: https://packages.microsoft.com/keys/microsoft.asc
      repo_gpgcheck: yes

- name: Ensure VS Code is installed
  dnf:
      name: code
      state: present

- name: Install dnf packages
  dnf:
      name:
          - "@Development Tools"
          - neovim
          - zsh
          - tmux

          - gnome-tweaks
          - https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm
          - ibus-anthy
          - rclone

          # to build alacritty
          - cmake
          - freetype-devel
          - fontconfig-devel
          - libxcb-devel
          - libX11-devel
          - libxkbcommon-devel
      state: present
      update_cache: yes

- name: Install Alacritty
  import_tasks: distros/install-alacritty.yml
